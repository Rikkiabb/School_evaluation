<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for src/evaluationController.js</title>
    <meta charset="utf-8">

    <link rel="stylesheet" href="../prettify.css">

    <link rel="stylesheet" href="../base.css">
    <style type='text/css'>
        div.coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class="header high">
    <h1>Code coverage report for <span class="entity">src/evaluationController.js</span></h1>
    <h2>
        
        Statements: <span class="metric">100% <small>(51 / 51)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">91.67% <small>(11 / 12)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">100% <small>(4 / 4)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">100% <small>(51 / 51)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../index.html">All files</a> &#187; <a href="index.html">src/</a> &#187; evaluationController.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125</td><td class="line-coverage"><span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">11</span>
<span class="cline-any cline-yes">11</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">11</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">11</span>
<span class="cline-any cline-yes">11</span>
<span class="cline-any cline-yes">11</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">11</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">11</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">11</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">11</span>
<span class="cline-any cline-yes">11</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">11</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">11</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">11</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">11</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">11</span>
<span class="cline-any cline-yes">11</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">11</span>
<span class="cline-any cline-yes">11</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">8</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">11</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">6</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">3</span>
<span class="cline-any cline-yes">3</span>
<span class="cline-any cline-yes">3</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">7</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">angular.module('EvalApp').controller('EvaluationController', ["$scope", "$modalInstance", "toaster", "studentFactory", "TEMPLATE", "evaluationFactory",
function ($scope, $modalInstance, toaster, studentFactory, TEMPLATE, evaluationFactory) {
&nbsp;
&nbsp;
	$scope.courseQ = [];
	$scope.teacherQ = [];
	//Will contain answers of the student.
	$scope.qObjects = [];
&nbsp;
	$scope.questionCount = TEMPLATE.template.TeacherQuestions.length;
	$scope.template = TEMPLATE.template;
	$scope.teachers = TEMPLATE.teachers;
&nbsp;
	$scope.showLanguage = "isl"
&nbsp;
	//Change the language of the quesitons.
	$scope.changeLang = function(lang){
		$scope.showLanguage = lang;
	};
&nbsp;
	//for building courseQuestion objects
	$scope.array = TEMPLATE.template.CourseQuestions;
&nbsp;
	//Build the course question arry to be sent to the directive.
	for(var i = 0; i &lt; $scope.array.length; i++){
		$scope.obj = {
			question: $scope.array[i],
			answers: [],
			ID : $scope.array[i].ID
		};
		$scope.courseQ.push($scope.obj);
	}
&nbsp;
	//For building teacherQuestion objects
	$scope.tArr = TEMPLATE.template.TeacherQuestions;
&nbsp;
	//Build the teacher quesiton array to be sent to the directive.
	for(var k = 0; k &lt; TEMPLATE.teachers.length; k++){
&nbsp;
		//Will only be sent with object with the first question for the teacher.
		$scope.name = TEMPLATE.teachers[k].FullName;
&nbsp;
		for(var i = 0; i &lt; $scope.tArr.length; i++){
			$scope.obj = {
				question: $scope.tArr[i],
				answers: [],
				ID: k + "_" + $scope.tArr[i].ID,
				tName: $scope.name,
				SSN: TEMPLATE.teachers[k].SSN
			};
			//Clear teacher name. For displaying.
			$scope.name = "";
			$scope.teacherQ.push($scope.obj);
		}
	}
&nbsp;
&nbsp;
	//Add a object to the array that is sent to the server.
	function buildObj(QID, SSN, val){
		$scope.qObj = {
				QuestionID: QID,
				TeacherSSN: SSN,
				Value: val
			};
		$scope.qObjects.push($scope.qObj);
	}
&nbsp;
	//Save students answers.
	$scope.save = function () {
&nbsp;
		for(var i = 0; i &lt; $scope.courseQ.length; i++){
			//If text then send a string.
			if($scope.courseQ[i].question.Type === "text"){
				$scope.cVal = $scope.courseQ[i].answers[0];
				buildObj($scope.courseQ[i].question.ID, '', $scope.cVal);
			}
			//If single then send the answer id.
			else if($scope.courseQ[i].question.Type === "single"){
				$scope.cVal = $scope.courseQ[i].answers;
				buildObj($scope.courseQ[i].question.ID, '', $scope.cVal);
			}
			//if multiple then send all answers id's that are selected.
			else <span class="missing-if-branch" title="else path not taken" >E</span>if($scope.courseQ[i].question.Type === "multiple"){
&nbsp;
				for(var h = 0; h &lt; $scope.courseQ[i].answers.length; h++){
					$scope.cVal = ''
					$scope.cVal += $scope.courseQ[i].answers[h];
					buildObj($scope.courseQ[i].question.ID, '', $scope.cVal);
				}
			}
&nbsp;
		}
&nbsp;
		for(var i = 0; i &lt; $scope.teacherQ.length; i++){
			//If text then send a string.
			if($scope.teacherQ[i].question.Type === "text"){
				$scope.tVal = $scope.teacherQ[i].answers[0];
				buildObj($scope.teacherQ[i].question.ID, $scope.teacherQ[i].SSN, $scope.tVal);
			}
			//If single then send the answer id.
			else if($scope.teacherQ[i].question.Type === "single"){
				$scope.tVal = $scope.teacherQ[i].answers;
				buildObj($scope.teacherQ[i].question.ID, $scope.teacherQ[i].SSN, $scope.tVal);
			}
			//if multiple then send all answers id's that are selected.
			else if($scope.teacherQ[i].question.Type === "multiple"){
&nbsp;
				for(h = 0; h &lt; $scope.teacherQ[i].answers.length; h++){
					$scope.tVal = ''
					$scope.tVal += $scope.teacherQ[i].answers[h];
					buildObj($scope.teacherQ[i].question.ID, $scope.teacherQ[i].SSN, $scope.tVal);
				}
			}
		}
		//Add the answers to the server.
		evaluationFactory.addEvalQuestion(TEMPLATE.course,
			TEMPLATE.semester,
			TEMPLATE.evalID,
			$scope.qObjects
		);
		//Close the modal.
		$modalInstance.close();
	}
&nbsp;
}]);</pre></td></tr>
</table></pre>

</div>
<div class="footer">
    <div class="meta">Generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Wed Mar 18 2015 23:02:24 GMT+0000 (GMT)</div>
</div>

<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>

<script src="../sorter.js"></script>
</body>
</html>
